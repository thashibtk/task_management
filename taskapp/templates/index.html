<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
  <script>
    window.onload = function() {
      const token = localStorage.getItem('access_token');
      if (!token) {
        window.location.href = '/login/';
        return;
      }
      try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        const role = payload.role;

        if (role === 'superadmin') {
          window.location.href = '/superadmin/dashboard/';
        } else if (role === 'admin') {
          window.location.href = '/admin_dashboard/';
        } else if (role === 'user') {
          window.location.href = '/user/dashboard/';
        } else {
          window.location.href = '/login/';
        }
      } catch(e) {
        window.location.href = '/login/';
      }
    }
  </script>
</head>
<body>
  Redirecting...
</body>
</html>
